# ğŸ›’ SimpleShop - ì„¸ì…˜ ê¸°ë°˜ ì‡¼í•‘ëª° API

Spring Boot ê¸°ë°˜ìœ¼ë¡œ ë¡œê·¸ì¸ë¶€í„° ìƒí’ˆ ë“±ë¡, ë‹¤ì¤‘ ì´ë¯¸ì§€ ì—…ë¡œë“œ, Swagger ë¬¸ì„œí™”ê¹Œì§€ êµ¬í˜„í•œ ì‹¤ì „í˜• REST API ë°±ì—”ë“œ í”„ë¡œì íŠ¸ì…ë‹ˆë‹¤.

---

## ğŸ¯ í”„ë¡œì íŠ¸ ëª©ì 

**í´ë¼ìš°ë“œ ì¸í”„ë¼ ê²½í—˜ ê¸°ë°˜ì˜ ë°±ì—”ë“œ ì „í–¥**ì„ ëª©í‘œë¡œ, ì‹¤ë¬´ ì„œë¹„ìŠ¤ êµ¬ì„± ìš”ì†Œì¸ ì¸ì¦/ì¸ê°€, ì´ë¯¸ì§€ ì²˜ë¦¬, RESTful ì„¤ê³„, ë¬¸ì„œí™” ë“±ì„ ì§ì ‘ êµ¬í˜„í•˜ë©° ë°±ì—”ë“œ ê°œë°œ ì—­ëŸ‰ì„ ê°•í™”í–ˆìŠµë‹ˆë‹¤.

- ì„¸ì…˜ ì¸ì¦ ë° ìŠ¤í”„ë§ ì‹œíë¦¬í‹° íë¦„ ì´í•´
- S3 ì—…ë¡œë“œ ë° IAM Role ì—°ë™ êµ¬ì¡° êµ¬í˜„
- Swagger 3.0 ê¸°ë°˜ ë¬¸ì„œí™” ë° í…ŒìŠ¤íŠ¸ ìë™í™”
- ë„ë©”ì¸ ì¤‘ì‹¬ êµ¬ì¡°ì™€ API ì„¤ê³„ íŒ¨í„´ ì ìš©

---

## ğŸª íšŒê³  (Retrospective)

- **ì„¸ì…˜ ì¸ì¦ì„ ìˆ˜ë™ êµ¬í˜„í•˜ë©°** Spring Securityì˜ íë¦„ì„ ì²´ë“
- S3 ì´ë¯¸ì§€ ì—…ë¡œë“œë¥¼ **IAM Role ë°©ì‹ìœ¼ë¡œ êµ¬ì„±**, ë³´ì•ˆê³¼ ìš´ì˜ê¹Œì§€ ê³ ë ¤
- **ë‹¤ì¤‘ ì´ë¯¸ì§€ ì²˜ë¦¬ + ìˆœì„œ ë³´ì¥/ì‚­ì œ ê¸°ëŠ¥ êµ¬í˜„**ì„ í†µí•´ ì‹¤ë¬´ì— ê°€ê¹Œìš´ API ì„¤ê³„ ê²½í—˜
- Swagger ë¬¸ì„œì— ì¿ í‚¤ ì¸ì¦(JSESSIONID)ì„ ì—°ë™í•˜ì—¬ **í”„ë¡ íŠ¸ í˜‘ì—…ì„ ìœ„í•œ API í…ŒìŠ¤íŠ¸ í™˜ê²½ êµ¬ì„±**
- **í˜ì´ì§• + ì •ë ¬ ê¸°ëŠ¥ êµ¬í˜„**ìœ¼ë¡œ ì‹¤ì œ ë°ì´í„° API ì„¤ê³„ íŒ¨í„´ì„ ìŠµë“

---

## ğŸ“Œ ì£¼ìš” ê¸°ëŠ¥

| ê¸°ëŠ¥ | ì„¤ëª… |
|------|------|
| âœ… íšŒì›ê°€ì… & ë¡œê·¸ì¸ | ì„¸ì…˜ ê¸°ë°˜ ì¸ì¦ ì²˜ë¦¬ (JSESSIONID) |
| âœ… ì„¸ì…˜ ì¸ì¦ ì²˜ë¦¬ | ë¡œê·¸ì¸ í›„ API ì ‘ê·¼ ì‹œ ì„¸ì…˜ ê¸°ë°˜ ì¸ì¦ í•„í„° ì ìš© |
| âœ… ìƒí’ˆ CRUD | ì‘ì„±ìë§Œ ìˆ˜ì •/ì‚­ì œ ê°€ëŠ¥ |
| âœ… ì´ë¯¸ì§€ ì—…ë¡œë“œ | AWS S3 ê¸°ë°˜ ë‹¤ì¤‘ ì´ë¯¸ì§€ ì—…ë¡œë“œ (URL ë°˜í™˜) |
| âœ… ì´ë¯¸ì§€ ì‚­ì œ | ë‹¨ì¼ ì´ë¯¸ì§€ ì‚­ì œ + ìë™ ìˆœì„œ ì¬ì •ë ¬ |
| âœ… í˜ì´ì§• ë° ì •ë ¬ | ìµœì‹ ìˆœ, ê°€ê²©ìˆœ ì •ë ¬ ì˜µì…˜ ì œê³µ |
| âœ… Swagger ë¬¸ì„œí™” | Springdoc OpenAPI 3.0 ê¸°ë°˜ UI ìë™ ìƒì„± |

---

## ğŸ› ï¸ ê¸°ìˆ  ìŠ¤íƒ

| ë¶„ë¥˜ | ê¸°ìˆ  |
|------|------|
| Framework | Spring Boot 3.x, Spring Security, Spring Web, JPA (Hibernate) |
| ì¸ì¦ | ì„¸ì…˜ ê¸°ë°˜ ì¸ì¦ (HttpSession + Cookie) |
| DB | H2, MariaDB |
| íŒŒì¼ ì €ì¥ì†Œ | AWS S3 (IAM Role ì—°ë™) |
| ë¬¸ì„œí™” | Swagger UI (springdoc-openapi 3.x) |
| í…ŒìŠ¤íŠ¸ ë„êµ¬ | Postman, Swagger UI |
| ê°œë°œ ë„êµ¬ | IntelliJ, Gradle, Git |

---

## ğŸ” ì¸ì¦ êµ¬ì¡° (Session-based)

```text
[Login]
â†’ POST /api/users/login
â†’ ì„œë²„ ì„¸ì…˜ ìƒì„± + JSESSIONID ë°œê¸‰ (HttpOnly Cookie)

[ì¸ì¦ í•„í„° ì‘ë™]
â†’ ëª¨ë“  ìš”ì²­ì— ì¿ í‚¤ í¬í•¨
â†’ ì„¸ì…˜ ì¸ì¦ í•„í„°(SessionFilter)ê°€ ì‚¬ìš©ì ID ê²€ì¦

[Logout]
â†’ POST /api/users/logout
â†’ ì„¸ì…˜ ë¬´íš¨í™”
````

> Swagger UIì—ì„œ `cookie: JSESSIONID`ë¥¼ ìˆ˜ë™ìœ¼ë¡œ ì…ë ¥í•˜ì—¬ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥

---

## ğŸ“· ì´ë¯¸ì§€ ì²˜ë¦¬ êµ¬ì¡°

* **ë‹¤ì¤‘ ì—…ë¡œë“œ** ì§€ì› (`POST /api/products/{id}/images`)
* ì—…ë¡œë“œ ì‹œ ìˆœì„œ ìë™ ì§€ì • (`imageOrder`)
* ì‚­ì œ ì‹œ ìˆœì„œ ìë™ ì¬ì •ë ¬
* S3ì—ì„œ `public-read` URL ë°˜í™˜ â†’ ì§ì ‘ í‘œì‹œ ê°€ëŠ¥

### ìƒí’ˆ ì¡°íšŒ ì˜ˆì‹œ

```json
{
  "id": 1,
  "name": "í…ŒìŠ¤íŠ¸ ìƒí’ˆ",
  "images": [
    { "id": 10, "url": "https://.../img1.jpg", "order": 0 },
    { "id": 11, "url": "https://.../img2.jpg", "order": 1 }
  ]
}
```

---

## ğŸ§ª ì‹¤í–‰ ë°©ë²•

1. `application.yml` ì— ë‹¤ìŒ í•­ëª© ì„¤ì •

   ```yaml
   file:
     upload-dir: uploads/
   cloud:
     aws:
       s3:
         bucket: your-bucket-name
   ```
2. ë¡œì»¬ ì„œë²„ ì‹¤í–‰: `./gradlew bootRun`
   - 8080 í¬íŠ¸ ì‚¬ìš©ì‹œ ì œê±°
     - `ID=$(lsof -ti :8080)` -> `[ -n "$PID" ] && kill "$PID"`
3. Swagger ë¬¸ì„œ í™•ì¸: [http://localhost:8080/swagger-ui/index.html](http://localhost:8080/swagger-ui/index.html)
---

## ğŸ“‚ ë””ë ‰í† ë¦¬ êµ¬ì¡° (ìš”ì•½)

```
src/main/java/com/example/simpleshop
â”œâ”€â”€ config                 # Security, Swagger, S3 ì„¤ì •
â”œâ”€â”€ controller             # User, Product API ì»¨íŠ¸ë¡¤ëŸ¬
â”œâ”€â”€ domain
â”‚   â”œâ”€â”€ product            # Product, ProductImage ì—”í‹°í‹° ë° ì„œë¹„ìŠ¤
â”‚   â””â”€â”€ user               # User ì—”í‹°í‹° ë° ì¸ì¦ ì„œë¹„ìŠ¤
â”œâ”€â”€ dto                   # Request/Response DTOs
```

---



